'use strict';

var should = require('should');
var request = require('supertest');
var server = require('../../../app');

describe('controllers', function () {

  describe('artist', function () {

    describe('GET /artist/{mbid}', function () {

      it('should return a really great album', function (done) {

        request(server).get('/artists/5b11f4ce­a62d­471e­81fc­a69a8278c7da').set('Accept', 'application/json').expect('Content-Type', /json/).expect(200).end(function (err, res) {
          should.not.exist(err);
          var json = res.body;

          json.should.eql({
            "mbid": "5b11f4ce­a62d­471e­81fc­a69a8278c7da",
            "description": "<p><b>Nirvana</b> was an American rock band formed by singer and guitarist Kurt Cobain and bassist Krist Novoselic in Aberdeen, Washington, in 1987. Nirvana went through a succession of drummers, the longest-lasting being Dave Grohl, who joined the band in 1990. Despite releasing only three full-length studio albums in their seven-year career, Nirvana has come to be regarded as one of the most influential and important rock bands of the modern era. Though the band dissolved in 1994, their music continues to maintain a popular following and to inspire and influence modern rock and roll culture.</p>\n<p>In the late 1980s, Nirvana established itself as part of the Seattle grunge scene, releasing its first album, <i>Bleach</i>, for the independent record label Sub Pop in 1989. The band eventually came to develop a sound that relied on dynamic contrasts, often between quiet verses and loud, heavy choruses. After signing to major label DGC Records, Nirvana found unexpected success with \"Smells Like Teen Spirit\", the first single from the band's second album <i>Nevermind</i> (1991). Nirvana's sudden success widely popularized alternative rock as a whole, and the band's frontman Cobain found himself referred to in the media as the \"spokesman of a generation\", with Nirvana being considered the \"flagship band\" of Generation X. In response, Nirvana's third studio album, <i>In Utero</i> (1993), released to critical acclaim, featured an abrasive, less mainstream sound and challenged the group's audience.</p>\n<p>Nirvana's active career ended following the death of Kurt Cobain in 1994, but various posthumous releases have been issued since, overseen by Novoselic, Grohl, and Cobain's widow Courtney Love. Since its debut, the band has sold over 25 million records in the United States alone, and over 75 million records worldwide, making them one of the best-selling bands of all time. Nirvana was inducted into the Rock and Roll Hall of Fame in 2014, in its first year of eligibility.</p>\n<p></p>",
            "albums": [{
              "title": "Nevermind",
              "id": "1b022e01­4da6­387b­8658­8678046e4cef",
              "image": "http://coverartarchive.org/release/a146429a­cedc­3ab0­9e41­1aaf5f6cdc2d/3012495605.jpg"
            }]
          });

          done();
        });
      });

      it('should return 404 (NOT FOUND)', function (done) {

        request(server).get('/artists/--INVALID-ID--').set('Accept', 'application/json').expect('Content-Type', /json/).expect(200).end(function (err, res) {
          should.not.exist(err);
          done();
        });
      });
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvYXBpL2NvbnRyb2xsZXJzL2FydGlzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksU0FBUyxRQUFRLFFBQVIsQ0FBYjtBQUNBLElBQUksVUFBVSxRQUFRLFdBQVIsQ0FBZDtBQUNBLElBQUksU0FBUyxRQUFRLGNBQVIsQ0FBYjs7QUFFQSxTQUFTLGFBQVQsRUFBd0IsWUFBVzs7QUFFakMsV0FBUyxRQUFULEVBQW1CLFlBQVc7O0FBRTVCLGFBQVMsb0JBQVQsRUFBK0IsWUFBVzs7QUFFeEMsU0FBRyxvQ0FBSCxFQUF5QyxVQUFTLElBQVQsRUFBZTs7QUFFdEQsZ0JBQVEsTUFBUixFQUNHLEdBREgsQ0FDTywrQ0FEUCxFQUVHLEdBRkgsQ0FFTyxRQUZQLEVBRWlCLGtCQUZqQixFQUdHLE1BSEgsQ0FHVSxjQUhWLEVBRzBCLE1BSDFCLEVBSUcsTUFKSCxDQUlVLEdBSlYsRUFLRyxHQUxILENBS08sVUFBUyxHQUFULEVBQWMsR0FBZCxFQUFtQjtBQUN0QixpQkFBTyxHQUFQLENBQVcsS0FBWCxDQUFpQixHQUFqQjtBQUNBLGNBQUksT0FBTyxJQUFJLElBQWY7O0FBRUEsZUFBSyxNQUFMLENBQVksR0FBWixDQUFnQjtBQUNaLG9CQUFVLHNDQURFO0FBRVosMkJBQWdCLG8rREFGSjtBQUdaLHNCQUFVLENBQ047QUFDSSx1QkFBVSxXQURkO0FBRUksb0JBQU8sc0NBRlg7QUFHSSx1QkFBVTtBQUhkLGFBRE07QUFIRSxXQUFoQjs7QUFZQTtBQUNELFNBdEJIO0FBdUJELE9BekJEOztBQTJCQSxTQUFHLCtCQUFILEVBQW9DLFVBQVMsSUFBVCxFQUFlOztBQUVqRCxnQkFBUSxNQUFSLEVBQ0csR0FESCxDQUNPLHlCQURQLEVBRUcsR0FGSCxDQUVPLFFBRlAsRUFFaUIsa0JBRmpCLEVBR0csTUFISCxDQUdVLGNBSFYsRUFHMEIsTUFIMUIsRUFJRyxNQUpILENBSVUsR0FKVixFQUtHLEdBTEgsQ0FLTyxVQUFTLEdBQVQsRUFBYyxHQUFkLEVBQW1CO0FBQ3RCLGlCQUFPLEdBQVAsQ0FBVyxLQUFYLENBQWlCLEdBQWpCO0FBQ0E7QUFDRCxTQVJIO0FBU0QsT0FYRDtBQWFELEtBMUNEO0FBNENELEdBOUNEO0FBZ0RELENBbEREIiwiZmlsZSI6ImFydGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBzaG91bGQgPSByZXF1aXJlKCdzaG91bGQnKTtcbnZhciByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG52YXIgc2VydmVyID0gcmVxdWlyZSgnLi4vLi4vLi4vYXBwJyk7XG5cbmRlc2NyaWJlKCdjb250cm9sbGVycycsIGZ1bmN0aW9uKCkge1xuXG4gIGRlc2NyaWJlKCdhcnRpc3QnLCBmdW5jdGlvbigpIHtcblxuICAgIGRlc2NyaWJlKCdHRVQgL2FydGlzdC97bWJpZH0nLCBmdW5jdGlvbigpIHtcblxuICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSByZWFsbHkgZ3JlYXQgYWxidW0nLCBmdW5jdGlvbihkb25lKSB7XG5cbiAgICAgICAgcmVxdWVzdChzZXJ2ZXIpXG4gICAgICAgICAgLmdldCgnL2FydGlzdHMvNWIxMWY0Y2XCrWE2MmTCrTQ3MWXCrTgxZmPCrWE2OWE4Mjc4YzdkYScpXG4gICAgICAgICAgLnNldCgnQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKVxuICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLylcbiAgICAgICAgICAuZXhwZWN0KDIwMClcbiAgICAgICAgICAuZW5kKGZ1bmN0aW9uKGVyciwgcmVzKSB7XG4gICAgICAgICAgICBzaG91bGQubm90LmV4aXN0KGVycik7XG4gICAgICAgICAgICB2YXIganNvbiA9IHJlcy5ib2R5O1xuXG4gICAgICAgICAgICBqc29uLnNob3VsZC5lcWwoe1xuICAgICAgICAgICAgICAgIFwibWJpZFwiIDogIFwiNWIxMWY0Y2XCrWE2MmTCrTQ3MWXCrTgxZmPCrWE2OWE4Mjc4YzdkYVwiICxcbiAgICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCIgOiBcIjxwPjxiPk5pcnZhbmE8L2I+IHdhcyBhbiBBbWVyaWNhbiByb2NrIGJhbmQgZm9ybWVkIGJ5IHNpbmdlciBhbmQgZ3VpdGFyaXN0IEt1cnQgQ29iYWluIGFuZCBiYXNzaXN0IEtyaXN0IE5vdm9zZWxpYyBpbiBBYmVyZGVlbiwgV2FzaGluZ3RvbiwgaW4gMTk4Ny4gTmlydmFuYSB3ZW50IHRocm91Z2ggYSBzdWNjZXNzaW9uIG9mIGRydW1tZXJzLCB0aGUgbG9uZ2VzdC1sYXN0aW5nIGJlaW5nIERhdmUgR3JvaGwsIHdobyBqb2luZWQgdGhlIGJhbmQgaW4gMTk5MC4gRGVzcGl0ZSByZWxlYXNpbmcgb25seSB0aHJlZSBmdWxsLWxlbmd0aCBzdHVkaW8gYWxidW1zIGluIHRoZWlyIHNldmVuLXllYXIgY2FyZWVyLCBOaXJ2YW5hIGhhcyBjb21lIHRvIGJlIHJlZ2FyZGVkIGFzIG9uZSBvZiB0aGUgbW9zdCBpbmZsdWVudGlhbCBhbmQgaW1wb3J0YW50IHJvY2sgYmFuZHMgb2YgdGhlIG1vZGVybiBlcmEuIFRob3VnaCB0aGUgYmFuZCBkaXNzb2x2ZWQgaW4gMTk5NCwgdGhlaXIgbXVzaWMgY29udGludWVzIHRvIG1haW50YWluIGEgcG9wdWxhciBmb2xsb3dpbmcgYW5kIHRvIGluc3BpcmUgYW5kIGluZmx1ZW5jZSBtb2Rlcm4gcm9jayBhbmQgcm9sbCBjdWx0dXJlLjwvcD5cXG48cD5JbiB0aGUgbGF0ZSAxOTgwcywgTmlydmFuYSBlc3RhYmxpc2hlZCBpdHNlbGYgYXMgcGFydCBvZiB0aGUgU2VhdHRsZSBncnVuZ2Ugc2NlbmUsIHJlbGVhc2luZyBpdHMgZmlyc3QgYWxidW0sIDxpPkJsZWFjaDwvaT4sIGZvciB0aGUgaW5kZXBlbmRlbnQgcmVjb3JkIGxhYmVsIFN1YiBQb3AgaW4gMTk4OS4gVGhlIGJhbmQgZXZlbnR1YWxseSBjYW1lIHRvIGRldmVsb3AgYSBzb3VuZCB0aGF0IHJlbGllZCBvbiBkeW5hbWljIGNvbnRyYXN0cywgb2Z0ZW4gYmV0d2VlbiBxdWlldCB2ZXJzZXMgYW5kIGxvdWQsIGhlYXZ5IGNob3J1c2VzLiBBZnRlciBzaWduaW5nIHRvIG1ham9yIGxhYmVsIERHQyBSZWNvcmRzLCBOaXJ2YW5hIGZvdW5kIHVuZXhwZWN0ZWQgc3VjY2VzcyB3aXRoIFxcXCJTbWVsbHMgTGlrZSBUZWVuIFNwaXJpdFxcXCIsIHRoZSBmaXJzdCBzaW5nbGUgZnJvbSB0aGUgYmFuZCdzIHNlY29uZCBhbGJ1bSA8aT5OZXZlcm1pbmQ8L2k+ICgxOTkxKS4gTmlydmFuYSdzIHN1ZGRlbiBzdWNjZXNzIHdpZGVseSBwb3B1bGFyaXplZCBhbHRlcm5hdGl2ZSByb2NrIGFzIGEgd2hvbGUsIGFuZCB0aGUgYmFuZCdzIGZyb250bWFuIENvYmFpbiBmb3VuZCBoaW1zZWxmIHJlZmVycmVkIHRvIGluIHRoZSBtZWRpYSBhcyB0aGUgXFxcInNwb2tlc21hbiBvZiBhIGdlbmVyYXRpb25cXFwiLCB3aXRoIE5pcnZhbmEgYmVpbmcgY29uc2lkZXJlZCB0aGUgXFxcImZsYWdzaGlwIGJhbmRcXFwiIG9mIEdlbmVyYXRpb24gWC4gSW4gcmVzcG9uc2UsIE5pcnZhbmEncyB0aGlyZCBzdHVkaW8gYWxidW0sIDxpPkluIFV0ZXJvPC9pPiAoMTk5MyksIHJlbGVhc2VkIHRvIGNyaXRpY2FsIGFjY2xhaW0sIGZlYXR1cmVkIGFuIGFicmFzaXZlLCBsZXNzIG1haW5zdHJlYW0gc291bmQgYW5kIGNoYWxsZW5nZWQgdGhlIGdyb3VwJ3MgYXVkaWVuY2UuPC9wPlxcbjxwPk5pcnZhbmEncyBhY3RpdmUgY2FyZWVyIGVuZGVkIGZvbGxvd2luZyB0aGUgZGVhdGggb2YgS3VydCBDb2JhaW4gaW4gMTk5NCwgYnV0IHZhcmlvdXMgcG9zdGh1bW91cyByZWxlYXNlcyBoYXZlIGJlZW4gaXNzdWVkIHNpbmNlLCBvdmVyc2VlbiBieSBOb3Zvc2VsaWMsIEdyb2hsLCBhbmQgQ29iYWluJ3Mgd2lkb3cgQ291cnRuZXkgTG92ZS4gU2luY2UgaXRzIGRlYnV0LCB0aGUgYmFuZCBoYXMgc29sZCBvdmVyIDI1IG1pbGxpb24gcmVjb3JkcyBpbiB0aGUgVW5pdGVkIFN0YXRlcyBhbG9uZSwgYW5kIG92ZXIgNzUgbWlsbGlvbiByZWNvcmRzIHdvcmxkd2lkZSwgbWFraW5nIHRoZW0gb25lIG9mIHRoZSBiZXN0LXNlbGxpbmcgYmFuZHMgb2YgYWxsIHRpbWUuIE5pcnZhbmEgd2FzIGluZHVjdGVkIGludG8gdGhlIFJvY2sgYW5kIFJvbGwgSGFsbCBvZiBGYW1lIGluIDIwMTQsIGluIGl0cyBmaXJzdCB5ZWFyIG9mIGVsaWdpYmlsaXR5LjwvcD5cXG48cD48L3A+XCIsICBcbiAgICAgICAgICAgICAgICBcImFsYnVtc1wiIDpbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIiA6IFwiTmV2ZXJtaW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCIgOiBcIjFiMDIyZTAxwq00ZGE2wq0zODdiwq04NjU4wq04Njc4MDQ2ZTRjZWZcIiwgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbWFnZVwiIDogXCJodHRwOi8vY292ZXJhcnRhcmNoaXZlLm9yZy9yZWxlYXNlL2ExNDY0Mjlhwq1jZWRjwq0zYWIwwq05ZTQxwq0xYWFmNWY2Y2RjMmQvMzAxMjQ5NTYwNS5qcGdcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgKE5PVCBGT1VORCknLCBmdW5jdGlvbihkb25lKSB7XG5cbiAgICAgICAgcmVxdWVzdChzZXJ2ZXIpXG4gICAgICAgICAgLmdldCgnL2FydGlzdHMvLS1JTlZBTElELUlELS0nKVxuICAgICAgICAgIC5zZXQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJylcbiAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pXG4gICAgICAgICAgLmV4cGVjdCgyMDApXG4gICAgICAgICAgLmVuZChmdW5jdGlvbihlcnIsIHJlcykge1xuICAgICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChlcnIpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICB9KTtcblxufSk7XG4iXX0=